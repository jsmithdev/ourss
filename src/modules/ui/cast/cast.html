<template>
    <div class="container">

        <div class="head">
            <div class="image-bg">
                <template if:true={isLoading}>
                    <div class="load-container" onclick={togLoad}>
                        <ui-loading
                            width="10rem"
                            height="10rem"
                        ></ui-loading>
                    </div>
                </template>
                <template if:false={isLoading}>
                    <img class="card-img" draggable="false" src={cast.image} />
                </template>
            </div>
            <div class="actions max-center">
                <svg class="delete" data-id={cast.id} viewBox="0 0 24 24" onclick={removeCast}>
                    <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"></path>
                </svg>
                <svg class="refresh" data-id={cast.id} viewBox="0 0 24 24" onclick={refresh}>
                    <path data-id={cast.id} d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"></path>
                </svg>
                <template if:true={cast.fav}>
                    <svg class="favorite" data-id={cast.id} viewBox="0 0 24 24" onclick={favorite}>
                        <path class="heart" data-id={cast.id} d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"></path>
                    </svg>
                </template>
                <template if:false={cast.fav}>
                    <svg class="favorite" data-id={cast.id} viewBox="0 0 24 24" onclick={favorite}>
                        <path class="heart-shaped-box" data-id={cast.id} d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"></path>
                    </svg>
                </template>
            </div>
        </div>
            
        <div class="items">
            <template for:each={items} for:item="item">
                <div 
                    key={item.id}
                    data-id={item.id}
                    class="item"
                    onclick={selectItem}
                >
                    <div class="heading">
                    <span class="title">{item.title}</span>
                    <br/>
                    {item.date}
                    </div>
                    <template if:true={item.selected}>
                        
                        <div class="description">
                            <span>{item.description}</span>
                        </div>
                        
                        <div class="controls">
                            <div onclick={addToQueue}
                                data-id={item.id}
                                data-parentid={cast.id}>
                                <svg class="queue" viewBox="0 0 24 24" onclick={addToQueue}>
                                    <g><rect fill="none" height="24" width="24"/></g>
                                    <g><path d="M14,10H3v2h11V10z M14,6H3v2h11V6z M18,14v-4h-2v4h-4v2h4v4h2v-4h4v-2H18z M3,16h7v-2H3V16z"/></g>
                                </svg>
                            </div>
                            <div onclick={play}
                                data-id={item.id}
                                data-parentid={cast.id}>
                                <svg class="play" viewBox="0 0 24 24" onclick={play}>
                                    <path d="M8 5v14l11-7z"></path>
                                </svg>
                            </div>
                        </div>
                    </template>
                </div>
            </template>
        </div>

    </div>
</template>